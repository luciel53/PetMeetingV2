{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jwtDecode } from \"jwt-decode\";\nexport default function Auth({\n  setIsAuth,\n  setUsername,\n  set\n}) {\n  _s();\n  {/* To manage the authentication */}\n  const [isAuthLocal, setIsAuthLocal] = useState(false);\n  const [userId, setUserId] = useState(\"\");\n  const [userIdLocal, setUserIdLocal] = useState(\"\");\n  const [usernameLocal, setUsernameLocal] = useState(\"\");\n  useEffect(() => {\n    if (localStorage.getItem(\"access_token\") !== null) {\n      setIsAuth(true);\n      setIsAuthLocal(true);\n      const token = localStorage.getItem(\"access_token\");\n      try {\n        const decodedToken = jwtDecode(token);\n        setUserId(decodedToken.user_id);\n        setUserIdLocal(decodedToken.user_id);\n        fetchUsernameByUserId(decodedToken.user_id);\n      } catch (error) {\n        console.error(\"Error decoding token\", error);\n      }\n    }\n  }, []);\n  const fetchUsernameByUserId = async () => {\n    try {\n      const response = await axios.get(`http://localhost:8000/users/${userId}/`);\n      console.log(response.data);\n      setUsername(response.data.username);\n      setUsernameLocal(response.data.username);\n    } catch (error) {\n      console.log(\"Error fetching username\", error);\n    }\n  };\n  return null;\n}\n_s(Auth, \"0N2oWZhInjAENhs1TcNoBmhy9xY=\");\n_c = Auth;\nvar _c;\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["React","useState","useEffect","NavLink","axios","jwtDecode","Auth","setIsAuth","setUsername","set","_s","isAuthLocal","setIsAuthLocal","userId","setUserId","userIdLocal","setUserIdLocal","usernameLocal","setUsernameLocal","localStorage","getItem","token","decodedToken","user_id","fetchUsernameByUserId","error","console","response","get","log","data","username","_c","$RefreshReg$"],"sources":["/home/lucie/Documents/PetMeetingV2/src/components/Auth.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jwtDecode } from \"jwt-decode\";\n\nexport default function Auth({ setIsAuth, setUsername, set }) {\n\t{/* To manage the authentication */}\n\tconst [isAuthLocal, setIsAuthLocal] = useState(false);\n\tconst [userId, setUserId] = useState(\"\");\n\tconst [userIdLocal, setUserIdLocal] = useState(\"\");\n\tconst [usernameLocal, setUsernameLocal] = useState(\"\");\n\n\tuseEffect(() => {\n\t  if (localStorage.getItem(\"access_token\") !== null) {\n\t\tsetIsAuth(true);\n\t\tsetIsAuthLocal(true);\n\t\tconst token = localStorage.getItem(\"access_token\");\n\t\ttry {\n\t\t  const decodedToken = jwtDecode(token);\n\t\t  setUserId(decodedToken.user_id);\n\t\t  setUserIdLocal(decodedToken.user_id);\n\t\t  fetchUsernameByUserId(decodedToken.user_id);\n\t\t} catch (error) {\n\t\t  console.error(\"Error decoding token\", error);\n\t\t}\n\t  }\n\t}, []);\n\n\tconst fetchUsernameByUserId = async () => {\n\t  try {\n\t\tconst response = await axios.get(`http://localhost:8000/users/${userId}/`);\n\t\tconsole.log(response.data);\n\t\tsetUsername(response.data.username);\n\t\tsetUsernameLocal(response.data.username);\n\t  } catch (error) {\n\t\tconsole.log(\"Error fetching username\", error);\n\t  }\n\t};\n\n\treturn null;\n}\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,OAAO,QAAQ,kBAAkB;AAC1C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,YAAY;AAEtC,eAAe,SAASC,IAAIA,CAAC;EAAEC,SAAS;EAAEC,WAAW;EAAEC;AAAI,CAAC,EAAE;EAAAC,EAAA;EAC7D,CAAC;EACD,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACY,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACgB,aAAa,EAAEC,gBAAgB,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAEtDC,SAAS,CAAC,MAAM;IACd,IAAIiB,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,KAAK,IAAI,EAAE;MACpDb,SAAS,CAAC,IAAI,CAAC;MACfK,cAAc,CAAC,IAAI,CAAC;MACpB,MAAMS,KAAK,GAAGF,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;MAClD,IAAI;QACF,MAAME,YAAY,GAAGjB,SAAS,CAACgB,KAAK,CAAC;QACrCP,SAAS,CAACQ,YAAY,CAACC,OAAO,CAAC;QAC/BP,cAAc,CAACM,YAAY,CAACC,OAAO,CAAC;QACpCC,qBAAqB,CAACF,YAAY,CAACC,OAAO,CAAC;MAC7C,CAAC,CAAC,OAAOE,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C;IACC;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMD,qBAAqB,GAAG,MAAAA,CAAA,KAAY;IACxC,IAAI;MACL,MAAMG,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,GAAG,CAAE,+BAA8Bf,MAAO,GAAE,CAAC;MAC1Ea,OAAO,CAACG,GAAG,CAACF,QAAQ,CAACG,IAAI,CAAC;MAC1BtB,WAAW,CAACmB,QAAQ,CAACG,IAAI,CAACC,QAAQ,CAAC;MACnCb,gBAAgB,CAACS,QAAQ,CAACG,IAAI,CAACC,QAAQ,CAAC;IACvC,CAAC,CAAC,OAAON,KAAK,EAAE;MACjBC,OAAO,CAACG,GAAG,CAAC,yBAAyB,EAAEJ,KAAK,CAAC;IAC5C;EACF,CAAC;EAED,OAAO,IAAI;AACZ;AAACf,EAAA,CAnCuBJ,IAAI;AAAA0B,EAAA,GAAJ1B,IAAI;AAAA,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}